<mat-toolbar
  id="mainToolbar"
  class="mat-elevation-z5"
  color="primary">
  <button
    mat-icon-button
    (click)="leftSidenav.toggle()">
    <mat-icon>menu</mat-icon>
  </button>
  <button
    mat-button
    (click)="onHome()"
    id="homeButton">
    {{ appName }}
  </button>
  <span class="toolbarSpan"></span>
  <button
    mat-icon-button
    (click)="onSaveImage()">
    <mat-icon>image</mat-icon>
  </button>
  <input
    id="fileInput"
    #fileInput
    type="file"
    (change)="onLoad($event)">
  <button
    mat-icon-button
    onclick="document.getElementById('fileInput').click()">
    <mat-icon>file_upload</mat-icon>
  </button>
  <button
    mat-icon-button
    (click)="onSave()">
    <mat-icon>file_download</mat-icon>
  </button>
  <button
    *ngIf="!rightSidenav.opened"
    mat-icon-button
    (click)="rightSidenav.toggle()">
    <mat-icon>info</mat-icon>
  </button>
  <button
    *ngIf="rightSidenav.opened"
    mat-mini-fab
    (click)="rightSidenav.toggle()">
    <mat-icon>info</mat-icon>
  </button>
  <mat-divider [inset]="true" [vertical]="true"></mat-divider>

  <a
    mat-button
    [routerLink]="['/users/login']">
    <mat-icon>exit_to_app</mat-icon>
    Login
  </a>
</mat-toolbar>

<mat-sidenav-container id="mainContainer" #mainContainer>
    <mat-sidenav
      id="leftSidenav"
      #leftSidenav
      position="start"
      mode="side">

      <mat-toolbar color="primary">
        <span>Graph Settings</span>
      </mat-toolbar>

      <div class="sidenav-elements">
        <mat-radio-group
          [(ngModel)]="data.graphSettings.type"
          (ngModelChange)="onGraphChange('type')">
          <mat-radio-button *ngFor="let type of graphTypes" [value]="type">
            {{type}}
          </mat-radio-button>
        </mat-radio-group>
        <mat-form-field>
            <mat-select
              placeholder="Node Size"
              [(ngModel)]="data.graphSettings.nodeSize"
              (ngModelChange)="onGraphChange('nodeSize')">
              <mat-option *ngFor="let size of sizes" [value]="size">
                {{size}}
              </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field>
            <mat-select
              placeholder="Font Size"
              [(ngModel)]="data.graphSettings.fontSize"
              (ngModelChange)="onGraphChange('fontSize')">
              <mat-option *ngFor="let size of sizes" [value]="size">
                {{size}}
              </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-checkbox
          [(ngModel)]="data.graphSettings.mergeDeliveries"
          (ngModelChange)="onGraphChange('mergeDeliveries')">
          Merge Deliveries
        </mat-checkbox>
        <mat-checkbox
          [(ngModel)]="data.graphSettings.showLegend"
          (ngModelChange)="onGraphChange('showLegend')">
          Show Legend
        </mat-checkbox>
        <mat-checkbox
          [(ngModel)]="data.graphSettings.showZoom"
          (ngModelChange)="onGraphChange('showZoom')">
          Show Zoom Controls
        </mat-checkbox>
      </div>

      <mat-toolbar color="primary">
        <span>Table Settings</span>
      </mat-toolbar>

      <div class="sidenav-elements">
        <mat-radio-group
          [(ngModel)]="data.tableSettings.mode"
          (ngModelChange)="onTableChange('mode')">
          <mat-radio-button *ngFor="let mode of tableModes" [value]="mode">
            {{mode}}
          </mat-radio-button>
        </mat-radio-group>
        <button
          mat-raised-button
          (click)="changeColumns()">
          Change Columns
        </button>
        <mat-form-field>
          <mat-select
            placeholder="Show Type"
            [(ngModel)]="data.tableSettings.showType"
            (ngModelChange)="onTableChange('showType')">
            <mat-option *ngFor="let showType of showTypes" [value]="showType">
              {{showType}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </mat-sidenav>

    <div id="mainContent">
      <router-outlet></router-outlet>
      <app-graph #graph [hidden]="data.graphSettings.type != graphType"></app-graph>
      <app-gis #gis [hidden]="data.graphSettings.type != gisType"></app-gis>
    </div>

    <mat-sidenav id="rightSidenav" #rightSidenav position="end" mode="side">
      <div id="rightSidenavContent">
        <div id="sidenavSlider" #sidenavSlider>
          <div id="sidenavSliderCenter"></div>
        </div>
        <app-table #table></app-table>
      </div>
    </mat-sidenav>
  </mat-sidenav-container>
